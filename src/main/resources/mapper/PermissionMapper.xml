<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.snowy_samuume.mapper.PermissionMapper">
    <resultMap id="public_map" type="com.snowy_samuume.entity.Permission">

    </resultMap>
    <resultMap id="one_map" type="com.snowy_samuume.entity.Permission">

    </resultMap>
    <select id="selectListByRolesId" resultMap="one_map">
        SELECT sp.permission_code from sys_roles_permission srp
        LEFT JOIN sys_permission sp
        ON srp.permission_id = sp.id
        WHERE srp.roles_id =#{rolesId} and sp.status = 0
    </select>

    <insert id="bulkInsertRolesAndPermission">
        INSERT INTO sys_roles_permission(`roles_id`, `permission_id`) VALUES
        <foreach collection="permissions" item="item"  separator=",">
            (#{roleId},#{item})
        </foreach>
    </insert>
</mapper>